
@{
    ViewBag.Title = "创建简历";
    Layout = "~/Views/Shared/_LayoutZg.cshtml";
}

<!--开始结束日期-->
<script src="~/script/jedate.min.js"></script>
<link href="~/css/jedate.css" rel="stylesheet" />

<div class="container mt10">
    <div class="row">
        <!--start left -->
    <div class="col-xs-12  col-lg-9 pr0">
    <!--start 发布简历 -->
    <style>
        .form-group {
            padding-right: 50px;
        }

        .form-group span {
            line-height: 30px;
        }

        .img-chose {
            border: 2px solid #eaeaea;
        }
    </style>
    <form action="/Jianli/getAdd" method="post" id="form_jlAdd">
    <div class="box pl15">
    <h4>选择头像</h4>
    <div class="d-flex flex-row">
        <img id="txuser" class="txuser img-circle img-chose" width="80px" src="/images/tx/ntouxiang.png" alt="">
        仅支持jpg/jpeg/gif/png格式，大小不超过2M
    </div>
    <script>
        $(".txuser").click(function () {
            $("#modal_tx").modal({ show: true });
        });

        $(document).on('click', '.tx', function () {
            $(".tx").removeClass("img-chose");
            $(".txuser").attr('src', this.src);
            $(this).addClass("img-chose");
            $("#modal_tx").modal.close();
        });
    </script>
    <!--start Modal -->
    <div class="modal fade" id="modal_tx" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">选择头像</h4>
                </div>
                <div class="modal-body text-center">
                    <img class="tx img-circle" width="80px" src="/images/tx/m2.png" alt="">
                    <img class="tx img-circle"  width="80px" src="/images/tx/m1.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/m3.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/m4.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/m5.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/w1.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/w1.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/w2.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/w3.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/w4.png" alt="">
                    <img class="tx img-circle" width="80px" src="/images/tx/w5.png" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
                </div>
            </div>
        </div>
    </div>
    <!--end Modal -->

    <hr>
    <h4>基础信息</h4>
    <div class="row">
        <input id="jlPic" class="form-control" type="hidden" name="jlPic" placeholder="头像">
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>姓名:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <input id="" class="form-control" type="text" name="jlName" placeholder="请输入真实姓名">
        </div>
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>联系方式:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <input id="" class="form-control" type="text" name="jlPhone" placeholder="请输入手机号">
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>性别:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <select name="jlGender" class="form-control">
                <option>男</option>
                <option>女</option>
            </select>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>出生年份:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <select name="jlage" class="form-control">
                <option value="2002-1-1">2002</option>
                <option value="2001-1-1">2001</option>
                <option value="2000-1-1">2000</option>
                <option value="1999-1-1">1999</option>
                <option value="1998-1-1">1998</option>
                <option value="1997-1-1">1997</option>
                <option value="1996-1-1">1996</option>
                <option value="1995-1-1">1995</option>
                <option value="1994-1-1">1994</option>
                <option value="1993-1-1">1993</option>
                <option value="1992-1-1">1992</option>
                <option value="1991-1-1">1991</option>
                <option value="1990-1-1">1990</option>

                <option value="1989-1-1">1989</option>
                <option value="1988-1-1">1988</option>
                <option value="1987-1-1">1987</option>
                <option value="1986-1-1">1986</option>
                <option value="1985-1-1">1985</option>
                <option value="1984-1-1">1984</option>
                <option value="1983-1-1">1983</option>
                <option value="1982-1-1">1982</option>
                <option value="1981-1-1">1981</option>
                <option value="1980-1-1">1980</option>

                <option value="1979-1-1">1979</option>
                <option value="1978-1-1">1978</option>
                <option value="1977-1-1">1977</option>
                <option value="1976-1-1">1976</option>
                <option value="1975-1-1">1975</option>
                <option value="1974-1-1">1974</option>
                <option value="1973-1-1">1973</option>
                <option value="1972-1-1">1972</option>
                <option value="1971-1-1">1971</option>
                <option value="1970-1-1">1970</option>

                <option value="1969-1-1">1969</option>
                <option value="1968-1-1">1968</option>
                <option value="1967-1-1">1967</option>
                <option value="1966-1-1">1966</option>
                <option value="1965-1-1">1965</option>
                <option value="1964-1-1">1964</option>
                <option value="1963-1-1">1963</option>
                <option value="1962-1-1">1962</option>
                <option value="1961-1-1">1961</option>
                <option value="1960-1-1">1960</option>




            </select>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>学历:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <select name="jlEdu" class="form-control">
                <option>博士研究生</option>
                <option>硕士研究生</option>
                <option selected="selected">本科</option>
                <option>专科</option>
                <option>高中</option>
                <option>中专</option>
                <option>初中</option>
                <option>小学</option>

            </select>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>期望薪资:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <select name="jlXinzi" class="form-control">
                <option value="2000">2000-3000元</option>
                <option value="3000" selected="selected">3000-5000元</option>
                <option value="5000">5000-8000元</option>
                <option value="8000">8000-10000元</option>
                <option value="10000">10000-15000元</option>
                <option value="150000">15000以上</option>
            </select>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>岗位:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <input id="" class="form-control" type="text" name="jlGw" placeholder="请输入你的求职岗位">
        </div>
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;">&nbsp;*&nbsp;&nbsp;</span><span>工作年限:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <select name="jlWork" class="form-control">
                <option value="1">1年</option>
                <option value="2">2年</option>
                <option value="3">3-5年</option>
                <option value="5">5-10年</option>
                <option value="10">10年以上</option>
                <option value="0">没有工作经验</option>
            </select>
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;"></span><span>婚姻:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <select name="jlHunyin" class="form-control">
                <option value="未婚">未婚</option>
                <option value="已婚">已婚</option>
                <option value="保密">保密</option>

            </select>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;"></span><span>身份证号:</span>
        </div>

        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <input id="" class="form-control" type="text" name="jlIC" placeholder="请输入身份证号">
        </div>
    </div>
    <div class="row ">
        <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
            <span style="color: red;"></span><span>邮箱:</span>
        </div>
        <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
            <input id="" class="form-control" type="text" name="jlEmail" placeholder="请输入电子邮箱">
        </div>

    </div>
    <hr>
    <h4>培训经历</h4>
    <input id="jl_peixun" class="form-control" type="hidden" name="jl_peixun">
    <div id="px_text" style="padding-left: 20px">
    </div>
    <script>
        $(function () {
            $("#btn_peixun").click(function () {
                var pxStarttime = $("#px_starttime").val();
                var pxEndtime = $("#px_endtime").val();
                var pxJigou = $("#px_jigou").val();
                var pxGw = $("#px_gw").val();
                $("#px_text").append('<div class="px_row"> <br> <b>时间：</b><span>' + pxStarttime + '至' + pxEndtime + '</span> <b>&nbsp;&nbsp;培训机构：</b><span>' + pxJigou + '</span> <b>&nbsp;&nbsp;培训岗位：</b><span>' + pxGw + '</span><a class="btn_px_text" style="color: #a52b2a;margin-left: 20px">删除</a>  </div>');

            });
            $(document).on('click', '.btn_px_text', function () {
                $(this).parent().remove();
            });

        });

    </script>
    <div id="addPeixun" style="color: #155fa8;">
        <br>
        <i class="glyphicon glyphicon-plus-sign"></i> 添加培训经历
    </div>
    <div class="row form-group peixun">
        <div class="row">
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span>培训机构:</span>
            </div>
            <div class="col-xs-8 col-sm-8 col-md-10 col-lg-10 text-left mt15">
                <input id="px_jigou" class="form-control" type="text" name="">
            </div>
        </div>
        <div class="row">
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span>起止时间:</span>
            </div>
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-left mt15">
                <input id="px_starttime" class="form-control" type="text" name="" placeholder="起">
            </div>
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-left mt15">
                <input id="px_endtime" class="form-control" type="text" name="" placeholder="止">
            </div>
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span>培训岗位:</span>
            </div>
            <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
                <input id="px_gw" class="form-control" type="text" name="">
            </div>
        </div>

        <div class="row peixun-row mt10">
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span style="color: red;">&nbsp;&nbsp;&nbsp;</span><span></span>
            </div>
            <div class="col-xs-8 col-sm-8 col-md-10 col-lg-10 text-left mt15">
                <button id="btn_peixun" type="button" class="btn btn-primary">添加</button>
                <button id="pxClose" type="button" class="btn btn-default">取消</button>
            </div>
        </div>
    </div>
    <hr>
    <h4>教育经历</h4>
    <input id="jl_jiaoyu" class="form-control" type="hidden" name="jl_jiaoyu">
    <div id="jy_text" style="padding-left: 20px">
    </div>
    <script>
        $(function () {
            $("#btn_jiaoyu").click(function () {
                var jyStarttime = $("#jy_starttime").val();
                var jyEndtime = $("#jy_endtime").val();
                var jyJigou = $("#jy_jigou").val();
                var jyZy = $("#px_zy").val();
                $("#jy_text").append(' <div class="jy_row"> <br> <b>时间：</b><span>' + jyStarttime + '至' + jyEndtime + '</span> <b>&nbsp;&nbsp;学校名称：</b><span>' + jyJigou + '</span> <b>&nbsp;&nbsp;所学专业：</b><span>' + jyZy + '</span><a class="btn_jy_text" style="color: #a52b2a;margin-left: 20px">删除</a>  </div>');


            });
            $(document).on('click', '.btn_jy_text', function () {
                $(this).parent().remove();
            });

        });

    </script>
    <div id="addJiaoyu" style="color: #155fa8;">
        <br>
        <i class="glyphicon glyphicon-plus-sign"></i> 添加教育经历
    </div>
    <div class="row form-group jiaoyu">
        <div class="row">
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span>学校名称:</span>
            </div>
            <div class="col-xs-8 col-sm-8 col-md-10 col-lg-10 text-left mt15">
                <input id="jy_jigou" class="form-control" type="text" name="">
            </div>
        </div>
        <div class="row">
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span>学习时间:</span>
            </div>
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-left mt15">
                <input id="jy_starttime" class="form-control" type="text" name="" placeholder="起">
            </div>
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-left mt15">
                <input id="jy_endtime" class="form-control" type="text" name="" placeholder="止">
            </div>
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span>所学专业:</span>
            </div>
            <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 text-left mt15">
                <input id="px_zy" class="form-control" type="text" name="">
            </div>
        </div>

        <div class="row peixun-row mt10">
            <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2 text-right mt15">
                <span style="color: red;">&nbsp;&nbsp;&nbsp;</span><span></span>
            </div>
            <div class="col-xs-8 col-sm-8 col-md-10 col-lg-10 text-left mt15">
                <button id="btn_jiaoyu" type="button" class="btn btn-primary">添加</button>
                <button id="jyClose" type="button" class="btn btn-default">取消</button>
            </div>
        </div>
    </div>
    <hr>
    <h4>工作经历及自我评价</h4>
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <textarea placeholder="简述自己的工作经历及对自己的评价..." name="jlPingJia" class="form-control" rows="4"></textarea>
        </div>
    </div>
    <div class="row peixun-row mt10">

        <div class="col-xs-8 col-sm-8 col-md-10 col-lg-10 text-left mt15">
            <div id="btn-submit" class="btn btn-primary">创建简历</div>
        </div>
    </div>
    </div>
    </form>
    <script>
        //添加培训经历
        $('.peixun').hide();
        $("#addPeixun").click(function () {
            $('.peixun').show();
        });
        $("#pxClose").click(function () {
            $('.peixun').hide();
        });
        //添加教育经历
        $('.jiaoyu').hide();

        $("#addJiaoyu").click(function () {
            $('.jiaoyu').show();
        });
        $("#jyClose").click(function () {
            $('.jiaoyu').hide();
        });
        //创建简历
        $("#btn-submit").click(function () {
            //赋值
            $("#jl_peixun").val($("#px_text").html());
            $("#jl_jiaoyu").val($("#jy_text").html());
            $("#jlPic").val($("#txuser")[0].src);
            //验证
            // 验证身份证
            function isCardNo(card) {
                var pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
                return pattern.test(card);
            }
            // 验证手机号
            function isPhoneNo(phone) {
                var pattern = /^1[34578]\d{9}$/;
                return pattern.test(phone);
            }
            var jlName = $('input[name="jlName"]').val();
            var jlPhone = $('input[name="jlPhone"]').val();
            var jlGw = $('input[name="jlGw"]').val();
            var jlIC = $('input[name="jlIC"]').val();

            if (!$.trim(jlName)) {
                warning("姓名不能为空！");
            }
            else if (!$.trim(jlPhone)) {
                warning("联系方式不能为空！");
            }
            else if (isPhoneNo($.trim(jlPhone)) == false) {
                warning("手机号码不正确！");
            }
            else if (!$.trim(jlGw)) {
                warning("岗位不能为空！");
            }
            //提交
            else {
                $("#form_jlAdd").submit();
            }

                  
        });
    </script>
    <!--end 发布简历 -->

    </div>

        <!--end left -->
        <!--start left -->
        <div class="col-xs-12  col-lg-3">
            <div class="box">
                <div id="card" class="row">
                    <a href="#">
                        <div class="right-card team">
                            <div style="float: left;">
                                <i class="fa fa-superpowers fa-4x"></i>
                            </div>
                            <div style="float:right">
                                <span>找项目</span>
                                <br>
                                免费发布施工队信息
                            </div>
                        </div>
                    </a>
                    <a href="#">
                        <div class="right-card xm">
                            <div style="float: left;padding:0 15px">
                                <i class="fa fa-users fa-4x"></i>
                            </div>
                            <div style="float:right">
                                <span>找队伍</span>
                                <br>
                                免费发布招工信息
                            </div>
                        </div>
                    </a>

                </div>
                <img src="/imgs/zp.png" class="img-responsive img-rounded" alt="Image">
            </div>
        </div>
        <!--end left -->
    </div>

</div>

<!--开始结束日期 -->
<script>
    $(document).ready(function () {
        jeDate('#px_starttime',
            {
                minDate: '1990-01-01',
                isinitVal: true,
                format: 'YYYY-MM-DD',
                onClose: false,
                donefun: function (obj) {
                    // console.log(obj)
                    var saliDate = obj.val.split("-");
                    // console.log(saliDate)
                    var riNum = 0;
                    var yueNum = 0;
                    var nianNum = saliDate[0];
                    // console.log(saliDate[1]-1)
                    // //判断月 同时判断年
                    if (saliDate[1] - 1 <= 0 && saliDate[2] == "01") {
                        yueNum = 12;
                        riNum = 31;
                        nianNum = nianNum;
                        // console.log(nianNum,yueNum,riNum)
                        $("#px_endtime").val(nianNum + "-" + yueNum + "-" + riNum)
                        return false;
                    } else {
                        yueNum = saliDate[1];
                        nianNum = nianNum - 0 + 1;
                    }
                    //当 日 是01 的时候要判断当前下一个月是否为31 还是30天  在判断一个是否为闰年  2月份是29 还是28
                    if (saliDate[2] == "01") {
                        switch (saliDate[1] - 1) {
                            case 1:
                            case 3:
                            case 5:
                            case 7:
                            case 8:
                            case 10:
                            case 0: //0就是12月  因为是只有点击的是2019-01-01  才会是2018-12-31
                                riNum = 31;
                                yueNum = "0" + (saliDate[1] - 1);
                                break;
                            case 4:
                            case 6:
                            case 9:
                            case 11:
                                riNum = 30;
                                yueNum = "0" + (saliDate[1] - 1);
                                break;
                        }
                        if (saliDate[1] - 1 == 2) {
                            yueNum = "0" + (saliDate[1] - 1);
                            //判断是否为闰年
                            if (isLeap(saliDate[0]) == 1) {
                                riNum = 29;
                            } else {
                                riNum = 28;
                            }
                        }
                    } else {
                        if (saliDate[2] - 1 <= 9) {
                            riNum = "0" + (saliDate[2] - 1);
                        } else {
                            riNum = saliDate[2] - 1;
                        }
                    }
                    //$("#px_endtime").val(nianNum + "-" + yueNum + "-" + riNum)
                    // console.log(nianNum,yueNum,riNum)
                }
            });
        jeDate('#px_endtime',
            {
                minDate: '1990-01-01',
                isinitVal: true,
                format: 'YYYY-MM-DD',
                onClose: false
            });

        //判断是否为闰年  若为闰年，返回1，反之则返回0
        function isLeap(year) {
            if ((year % 4 == 0 && year % 100 != 0) || (year % 400 == 0)) {
                return 1;
            }
            return 0;
        }
    })
</script>
<script>
    $(document).ready(function () {
        jeDate('#jy_starttime',
            {
                minDate: '1990-01-01',
                isinitVal: true,
                format: 'YYYY-MM-DD',
                onClose: false,
                donefun: function (obj) {
                    // console.log(obj)
                    var saliDate = obj.val.split("-");
                    // console.log(saliDate)
                    var riNum = 0;
                    var yueNum = 0;
                    var nianNum = saliDate[0];
                    // console.log(saliDate[1]-1)
                    // //判断月 同时判断年
                    if (saliDate[1] - 1 <= 0 && saliDate[2] == "01") {
                        yueNum = 12;
                        riNum = 31;
                        nianNum = nianNum;
                        // console.log(nianNum,yueNum,riNum)
                        $("#jy_endtime").val(nianNum + "-" + yueNum + "-" + riNum)
                        return false;
                    } else {
                        yueNum = saliDate[1];
                        nianNum = nianNum - 0 + 1;
                    }
                    //当 日 是01 的时候要判断当前下一个月是否为31 还是30天  在判断一个是否为闰年  2月份是29 还是28
                    if (saliDate[2] == "01") {
                        switch (saliDate[1] - 1) {
                        case 1:
                        case 3:
                        case 5:
                        case 7:
                        case 8:
                        case 10:
                        case 0: //0就是12月  因为是只有点击的是2019-01-01  才会是2018-12-31
                            riNum = 31;
                            yueNum = "0" + (saliDate[1] - 1);
                            break;
                        case 4:
                        case 6:
                        case 9:
                        case 11:
                            riNum = 30;
                            yueNum = "0" + (saliDate[1] - 1);
                            break;
                        }
                        if (saliDate[1] - 1 == 2) {
                            yueNum = "0" + (saliDate[1] - 1);
                            //判断是否为闰年
                            if (isLeap(saliDate[0]) == 1) {
                                riNum = 29;
                            } else {
                                riNum = 28;
                            }
                        }
                    } else {
                        if (saliDate[2] - 1 <= 9) {
                            riNum = "0" + (saliDate[2] - 1);
                        } else {
                            riNum = saliDate[2] - 1;
                        }
                    }
                    //    $("#px_endtime").val(nianNum + "-" + yueNum + "-" + riNum)
                    // console.log(nianNum,yueNum,riNum)
                }
            });
        jeDate('#jy_endtime',
            {
                minDate: '1990-01-01',
                isinitVal: true,
                format: 'YYYY-MM-DD',
                onClose: false
            });

        //判断是否为闰年  若为闰年，返回1，反之则返回0
        function isLeap(year) {
            if ((year % 4 == 0 && year % 100 != 0) || (year % 400 == 0)) {
                return 1;
            }
            return 0;
        }
    })
</script>

@Html.Partial("_Modal");
